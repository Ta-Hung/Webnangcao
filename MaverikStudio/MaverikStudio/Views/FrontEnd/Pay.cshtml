
@{
    Layout = "~/Views/Shared/frontend.cshtml";
}

<div class="container">
    <div class="grid wide">
        <div class="row">
            <div class="col c-7">
                <div style="padding: 0 50px;">
                    <h1 style="font-size: 36px; font-weight: 500;">Maverik Studio</h1>
                    <p style="font-size: 16px; font-weight: 400;">Thông tin giao hàng</p>
                    <p style="font-size: 14px; font-weight: 400;">Khách hàng: @Session["client_name"] (@Session["client_email"])</p>
                    <form action="@Url.Action("HandlePay", "FrontEnd")" method="POST" style="width: 100%;">
                        @Html.AntiForgeryToken()
                        <input class="pay__input" type="text" name="address" placeholder="Địa chỉ...">
                        @if (TempData["err_pay_address"] != null)
                        {
                            <span style="display: block;color: red; font-size: 14px; margin-bottom: 10px;">@TempData["err_pay_address"]</span>
                        }
                        <input class="pay__input" type="text" name="phone_number" placeholder="Số điện thoại...">
                        @if (TempData["err_pay_phone_number"] != null)
                        {
                            <span style="display: block; color: red; font-size: 14px; margin-bottom: 10px; ">@TempData["err_pay_phone_number"]</span>
                        }
                        <button class="button-dark" type="submit" style="display: block; ">Hoàn tất</button>
                    </form>
                </div>
            </div>

            <div class="col c-5" style="box-shadow: 1px 0 0 #e1e1e1 inset; background: rgb(250,250,250)">
                <p id="pay_total" style="font-size: 16px; font-weight: 400;">Tổng tiền: </p>
            </div>
        </div>
    </div>
</div>

@section css{
    <style>
        .pay__input {
            display: block;
            width: 100%;
            margin-bottom: 10px;
            padding: 13px 13px;
            font-size: 14px;
        }
    </style>
}

@section js{
    <script src="~/assets/frontend/js/container-sidebar.js"></script>
    <script src="~/assets/frontend/js/addcart.js"></script>
    <script>
        HandleSlider('#slider1');
    </script>
    <script>
        let arrItem = getCartFromCookie();
        let payTotal = 0;
        for (item of arrItem) {
            payTotal += item.price * item.quantity;
        }

        $('#pay_total').text('Tổng tiền: ' + formatCurrency(payTotal));
    </script>
    @if (TempData["success"] != null)
    {
        <script>
            alert('@TempData["success"]');

            function deleteCookie(name) {
                document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            }

            deleteCookie('gioHangCookie');
            showCart();
        </script>
    }
}

